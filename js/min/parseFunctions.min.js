function attemptSignUp(e,t,n){var i=new Parse.User;i.set("username",e),i.set("password",t),i.set("email",n),i.signUp(null,{success:function(){console.log("Successfully signed up user")},error:function(){console.log("Something went wrong")}})}function attemptLogin(e,t){Parse.User.logIn(e,t,{success:function(){redirectPage("../activeSession/")},error:function(){swal("Oh no!","Your username or password was incorrect","error")}})}function redirectPage(e){window.location.replace(e)}function checkForSession(e){1==e?Parse.User.current()?console.log("Logged in. Continuing..."):redirectPage("../login/"):0==e&&(Parse.User.current()?redirectPage("../activeSession/"):console.log("No current session. Continuing..."))}function attemptRecipeUpload(e,t,n,i,o){var r=Parse.Object.extend("Recipe"),s=new r;s.set("name",e),s.set("rating",Math.floor(5*Math.random())),s.set("author",t),s.set("description",n),s.set("imageUrl",i),s.set("content",o),s.set("itemWidthinList",1),s.save(null,{success:function(){swal("Hurray!","Your recipe has been added to our collection. Thanks for your contribution!","success")},error:function(){swal("Oh no!","Something went wrong on our end, try again later!","error")}})}function attemptLogOut(){Parse.User.logOut(),redirectPage("/")}function listRecipes(e,t){var n=Parse.Object.extend("Recipe"),i=new Parse.Query(n);switch(e){case"top":i.descending("rating");break;case"recent":i.descending("createdAt");break;case"none":}null==t?console.log("No search term specified. Continuing..."):i.contains("name",t),i.find({success:function(e){console.log("Successfully retrived recipes."),output="";for(var t=0;t<e.length;t++){var n=(e[t].get("name"),e[t].get("description")),i=e[t].get("imageUrl"),o=e[t].id,r=e[t].get("itemWidthInList");output+="<div onclick='setSingleCookie(&quot "+o+" &quot)' class='col-md-"+3*r+"'>",output+="<span class='grid-image'><img src='"+i+"' alt='"+n+"' /></span>",output+="<span class='grid-info'><h4>"+n+"</h4></span>",output+="</div>"}$("#main-repeat-grid").html(output)},error:function(){console.log("An error occurred when retieving recipes.")}})}function setSingleCookie(e){var t=stripSpaces(e);document.cookie="itemId="+t+"; path=/",console.log("Cookie set with value "+t),redirectPage("single.html")}function getSingleCookie(){for(var e=document.cookie,t=e.split(";"),n=0;n<t.length;n++){var i=t[n].split("=");" itemId"==i[0]&&(savedId=i[1])}}function stripSpaces(e){for(var t=e.split(""),n=0;n<t.length;n++)" "==t[n]&&(t.splice(n,1),n--);var i=t.join("");return i}function getSingleRecipe(){getSingleCookie();var e=Parse.Object.extend("Recipe"),t=new Parse.Query(e);t.equalTo("objectId",savedId),t.find({success:function(e){var t=e[0].get("name"),n=e[0].get("description"),i=e[0].get("imageUrl"),o=e[0].get("content");console.log(t),$("#singleName").text(t),$("#singleTitle").text(n),$("#mainSingleTitle").text(t),$("#singleContent").html(o),$("#singleImage").html('<img src="'+i+'" alt="'+n+'" />')}})}Parse.initialize("Dk7wZnUjEs8i4RmwdZ0YP13DQRU6gShDa3NauSC9","hpF2KqfxESRdHaEeBkZdYEFGdBLZP1yvvD2PA3IQ");var savedId="";$(document).ready(function(){Parse.User.current()&&($("#logInOut").html("<li onclick='attemptLogOut()'>Log Out</li>"),$("#logInOutNav").html("<li onclick='attemptLogOut()'>Log Out</li>"),$("#uploadId").html("<a href='activeSession/'>Upload Recipe</a>"))}),$(".form-login").submit(function(){var e=$(this).serializeArray(),t=e[0].value,n=e[1].value;return console.log("Logging in with username: "+t+" and password: "+n),attemptLogin(t,n),!1}),$(".recipe-add").submit(function(e){e.preventDefault();var t=$(this).serializeArray(),n=t[0].value,i=t[1].value,o=t[2].value,r=t[3].value,s=tinymce.activeEditor.getContent();return attemptRecipeUpload(n,i,o,r,s),!1}),$("#input-nolog").keypress(function(e){if(13==e.which){var t=$(this).val();listRecipes("none",t)}});